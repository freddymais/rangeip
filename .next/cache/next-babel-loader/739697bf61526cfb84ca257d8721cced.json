{"ast":null,"code":"import puppeteer from \"puppeteer-core\";\n\nlet _page;\n\nasync function getPage() {\n  if (_page) {\n    return _page;\n  }\n\n  const browser = await puppeteer.launch();\n  _page = await browser.newPage();\n  return _page;\n}\n\nexport async function getScreenshot(html) {\n  const page = await getPage();\n  await page.setViewport({\n    width: 1200,\n    height: 630\n  });\n  await page.setContent(html);\n  const file = await page.screenshot({\n    path: \"print.png\"\n  });\n  return file;\n}","map":{"version":3,"sources":["/opt/rangeip/pages/api/chromium.ts"],"names":["puppeteer","_page","getPage","browser","launch","newPage","getScreenshot","html","page","setViewport","width","height","setContent","file","screenshot","path"],"mappings":"AAAA,OAAOA,SAAP,MAAgC,gBAAhC;;AAEA,IAAIC,KAAJ;;AAEA,eAAeC,OAAf,GAAwC;AACtC,MAAID,KAAJ,EAAW;AACT,WAAOA,KAAP;AACD;;AAED,QAAME,OAAO,GAAG,MAAMH,SAAS,CAACI,MAAV,EAAtB;AACAH,EAAAA,KAAK,GAAG,MAAME,OAAO,CAACE,OAAR,EAAd;AAEA,SAAOJ,KAAP;AACD;;AAED,OAAO,eAAeK,aAAf,CAA6BC,IAA7B,EAA4D;AACjE,QAAMC,IAAI,GAAG,MAAMN,OAAO,EAA1B;AACA,QAAMM,IAAI,CAACC,WAAL,CAAiB;AAAEC,IAAAA,KAAK,EAAE,IAAT;AAAeC,IAAAA,MAAM,EAAE;AAAvB,GAAjB,CAAN;AACA,QAAMH,IAAI,CAACI,UAAL,CAAgBL,IAAhB,CAAN;AACA,QAAMM,IAAI,GAAG,MAAML,IAAI,CAACM,UAAL,CAAgB;AAAEC,IAAAA,IAAI,EAAE;AAAR,GAAhB,CAAnB;AAEA,SAAOF,IAAP;AACD","sourcesContent":["import puppeteer, { Page } from \"puppeteer-core\";\n\nlet _page: Page | null;\n\nasync function getPage(): Promise<Page> {\n  if (_page) {\n    return _page;\n  }\n\n  const browser = await puppeteer.launch();\n  _page = await browser.newPage();\n\n  return _page;\n}\n\nexport async function getScreenshot(html: string): Promise<Buffer> {\n  const page = await getPage();\n  await page.setViewport({ width: 1200, height: 630 });\n  await page.setContent(html);\n  const file = await page.screenshot({ path: \"print.png\" });\n\n  return file;\n}\n"]},"metadata":{},"sourceType":"module"}